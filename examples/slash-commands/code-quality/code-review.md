# 代码审查命令

自动化代码审查，包含代码质量检查、最佳实践验证和改进建议。

## 使用方法

将此文件保存为 `.claude/commands/code-review.md`，然后使用 `/code-review` 命令。

## 命令内容

```markdown
# 代码审查

执行全面的代码审查，检查代码质量、风格、安全性和最佳实践。

## 审查范围

审查目标: $ARGUMENTS (可指定文件、目录或提交哈希，默认审查当前工作区)

## 代码审查流程

### 1. 基础代码质量检查

#### 代码风格和格式
- 检查代码格式是否一致
- 验证命名规范
- 检查缩进和空白符使用
- 验证导入语句组织

#### 代码复杂度分析
- 计算圈复杂度
- 检查函数长度
- 分析代码嵌套深度
- 识别重复代码

#### 类型安全检查
- TypeScript 类型检查
- Python 类型提示验证
- Java 泛型使用检查
- Go 类型安全验证

### 2. 架构和设计审查

#### 设计模式使用
- 检查设计模式应用
- 评估代码结构合理性
- 验证接口设计
- 检查依赖关系

#### 性能考虑
- 识别潜在性能问题
- 检查算法复杂度
- 验证数据库查询效率
- 分析内存使用

### 3. 安全性审查

#### 安全漏洞检查
- SQL 注入风险
- XSS 攻击防护
- 身份验证问题
- 权限控制检查

#### 敏感信息保护
- 检查硬编码密钥
- 验证日志安全性
- 检查错误信息泄露
- 确认数据加密

### 4. 最佳实践验证

#### 错误处理
- 检查异常处理完整性
- 验证错误信息有用性
- 确认资源清理
- 检查日志记录

#### 测试覆盖
- 分析测试覆盖率
- 检查测试质量
- 验证边界条件测试
- 确认集成测试

## 生成审查报告并提供改进建议

请对指定范围内的代码进行详细审查，并生成包含以下内容的报告：

1. **代码质量评分** (1-10分)
2. **主要问题列表** (按优先级排序)
3. **具体改进建议** (包含代码示例)
4. **最佳实践建议**
5. **后续行动计划**

重点关注：
- 代码可读性和维护性
- 性能和安全性问题
- 架构设计合理性
- 测试覆盖和质量
- 文档完整性

请提供具体的修改建议，包括代码示例和解释。
```

## 示例用法

```bash
# 审查当前工作区所有更改
/code-review

# 审查特定文件
/code-review src/components/UserProfile.tsx

# 审查特定目录
/code-review src/services/

# 审查特定提交
/code-review abc123def
```

## 预期输出

Claude Code 将会：

1. 分析代码质量和风格
2. 检查安全性和性能问题
3. 验证最佳实践应用
4. 生成详细的审查报告
5. 提供具体的改进建议
6. 给出优先级排序的行动计划

## 相关命令

- `/fix-code-issues` - 自动修复代码问题
- `/refactor-code` - 代码重构建议
- `/check-style` - 代码风格检查
- `/security-review` - 专项安全审查